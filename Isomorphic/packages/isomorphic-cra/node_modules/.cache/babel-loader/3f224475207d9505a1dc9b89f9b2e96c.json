{"ast":null,"code":"import _slicedToArray from \"/Users/biswa/Sites/Others/demo/Isomorphic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/biswa/Sites/Others/demo/Isomorphic/shared/containers/Chat/ChatRooms.js\";\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport AddNewUser from './AddNewUser';\nimport Scrollbars from '@iso/components/utility/customScrollBar';\nimport Button from '@iso/components/uielements/button';\nimport HelperText from '@iso/components/utility/helper-text';\nimport chatActions from '@iso/redux/chat/actions';\nimport { timeDifference } from '@iso/lib/helpers/utility';\nimport { UserListsWrapper, UserLists, SidebarSearchBox, Input, ChatSidebar } from './Messages.styles';\nconst setSelectedChatroom = chatActions.setSelectedChatroom,\n      toggleMobileList = chatActions.toggleMobileList,\n      toggleCompose = chatActions.toggleCompose;\n\nfunction filteredChatRooms(chatrooms) {\n  return chatrooms.filter(chatroom => chatroom.lastMessageTime > 0);\n}\n\nexport default function ChatRooms() {\n  const dispatch = useDispatch();\n\n  const _useSelector = useSelector(state => state.Chat),\n        users = _useSelector.users,\n        chatRooms = _useSelector.chatRooms,\n        selectedChatRoom = _useSelector.selectedChatRoom;\n\n  const _useSelector2 = useSelector(state => state.App),\n        view = _useSelector2.view;\n\n  const _React$useState = React.useState(filteredChatRooms(chatRooms)),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        currentChatRooms = _React$useState2[0],\n        setCurrentChatRooms = _React$useState2[1];\n\n  React.useEffect(() => {\n    setCurrentChatRooms(filteredChatRooms(chatRooms));\n  }, [chatRooms]);\n  const currentChatRoom = view === 'DesktopView' ? selectedChatRoom : {};\n\n  const onSearch = event => {\n    const value = event.target.value;\n    let searchedChatRooms = filteredChatRooms(chatRooms);\n\n    if (value.trim()) {\n      searchedChatRooms = searchedChatRooms.filter(chatRoom => chatRoom.otherUserInfo.name.toLowerCase().includes(value.toLowerCase()));\n    }\n\n    setCurrentChatRooms(searchedChatRooms);\n  };\n\n  const singleChatRoom = (chatRoom, index) => {\n    const otherUserInfo = chatRoom.otherUserInfo,\n          lastMessage = chatRoom.lastMessage,\n          lastMessageTime = chatRoom.lastMessageTime;\n    const name = otherUserInfo.name,\n          profileImageUrl = otherUserInfo.profileImageUrl;\n    const selected = currentChatRoom.id === chatRoom.id;\n    const style = {\n      background: selected ? '#f7f7f7' : 'rgba(0,0,0,0)'\n    };\n\n    const selectChatroom = event => {\n      event.stopPropagation();\n\n      if (!selected) {\n        dispatch(setSelectedChatroom(chatRoom));\n      }\n\n      if (toggleMobileList) {\n        dispatch(toggleMobileList(false));\n      }\n    };\n\n    return React.createElement(UserLists, {\n      key: index,\n      style: style,\n      onClick: selectChatroom,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"userListsGravatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"#\",\n      style: {\n        width: 45,\n        height: 45\n      },\n      src: profileImageUrl,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"userListsContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, name), React.createElement(\"div\", {\n      className: \"chatExcerpt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, lastMessage), React.createElement(\"span\", {\n      className: \"userListsTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, timeDifference(lastMessageTime)))));\n  };\n\n  return React.createElement(ChatSidebar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(SidebarSearchBox, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Input, {\n    onChange: onSearch,\n    placeholder: \"Search Contact\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), React.createElement(AddNewUser, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  })), React.createElement(UserListsWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Scrollbars, {\n    style: {\n      height: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, currentChatRooms.length === 0 ? React.createElement(HelperText, {\n    text: \"No Conversation\",\n    className: \"messageHelperText\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }) : currentChatRooms.map(singleChatRoom))), users.length > 0 && React.createElement(\"div\", {\n    className: \"ComposeMessageButton\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: () => dispatch(toggleCompose()),\n    type: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Compose\")));\n}","map":{"version":3,"sources":["/Users/biswa/Sites/Others/demo/Isomorphic/shared/containers/Chat/ChatRooms.js"],"names":["React","useDispatch","useSelector","AddNewUser","Scrollbars","Button","HelperText","chatActions","timeDifference","UserListsWrapper","UserLists","SidebarSearchBox","Input","ChatSidebar","setSelectedChatroom","toggleMobileList","toggleCompose","filteredChatRooms","chatrooms","filter","chatroom","lastMessageTime","ChatRooms","dispatch","state","Chat","users","chatRooms","selectedChatRoom","App","view","useState","currentChatRooms","setCurrentChatRooms","useEffect","currentChatRoom","onSearch","event","value","target","searchedChatRooms","trim","chatRoom","otherUserInfo","name","toLowerCase","includes","singleChatRoom","index","lastMessage","profileImageUrl","selected","id","style","background","selectChatroom","stopPropagation","width","height","length","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport AddNewUser from './AddNewUser';\nimport Scrollbars from '@iso/components/utility/customScrollBar';\nimport Button from '@iso/components/uielements/button';\nimport HelperText from '@iso/components/utility/helper-text';\nimport chatActions from '@iso/redux/chat/actions';\nimport { timeDifference } from '@iso/lib/helpers/utility';\nimport {\n  UserListsWrapper,\n  UserLists,\n  SidebarSearchBox,\n  Input,\n  ChatSidebar,\n} from './Messages.styles';\nconst { setSelectedChatroom, toggleMobileList, toggleCompose } = chatActions;\nfunction filteredChatRooms(chatrooms) {\n  return chatrooms.filter(chatroom => chatroom.lastMessageTime > 0);\n}\nexport default function ChatRooms() {\n  const dispatch = useDispatch();\n  const { users, chatRooms, selectedChatRoom } = useSelector(\n    state => state.Chat\n  );\n  const { view } = useSelector(state => state.App);\n  const [currentChatRooms, setCurrentChatRooms] = React.useState(\n    filteredChatRooms(chatRooms)\n  );\n  React.useEffect(() => {\n    setCurrentChatRooms(filteredChatRooms(chatRooms));\n  }, [chatRooms]);\n\n  const currentChatRoom = view === 'DesktopView' ? selectedChatRoom : {};\n\n  const onSearch = event => {\n    const value = event.target.value;\n\n    let searchedChatRooms = filteredChatRooms(chatRooms);\n    if (value.trim()) {\n      searchedChatRooms = searchedChatRooms.filter(chatRoom =>\n        chatRoom.otherUserInfo.name.toLowerCase().includes(value.toLowerCase())\n      );\n    }\n    setCurrentChatRooms(searchedChatRooms);\n  };\n  const singleChatRoom = (chatRoom, index) => {\n    const { otherUserInfo, lastMessage, lastMessageTime } = chatRoom;\n    const { name, profileImageUrl } = otherUserInfo;\n    const selected = currentChatRoom.id === chatRoom.id;\n    const style = {\n      background: selected ? '#f7f7f7' : 'rgba(0,0,0,0)',\n    };\n    const selectChatroom = event => {\n      event.stopPropagation();\n\n      if (!selected) {\n        dispatch(setSelectedChatroom(chatRoom));\n      }\n      if (toggleMobileList) {\n        dispatch(toggleMobileList(false));\n      }\n    };\n    return (\n      <UserLists key={index} style={style} onClick={selectChatroom}>\n        <div className=\"userListsGravatar\">\n          <img\n            alt=\"#\"\n            style={{ width: 45, height: 45 }}\n            src={profileImageUrl}\n          />\n        </div>\n        <div className=\"userListsContent\">\n          <h4>{name}</h4>\n          <div className=\"chatExcerpt\">\n            <p>{lastMessage}</p>\n            <span className=\"userListsTime\">\n              {timeDifference(lastMessageTime)}\n            </span>\n          </div>\n        </div>\n      </UserLists>\n    );\n  };\n  return (\n    <ChatSidebar>\n      <SidebarSearchBox>\n        <Input onChange={onSearch} placeholder=\"Search Contact\" />\n        <AddNewUser />\n      </SidebarSearchBox>\n      <UserListsWrapper>\n        <Scrollbars style={{ height: '100%' }}>\n          {currentChatRooms.length === 0 ? (\n            <HelperText text=\"No Conversation\" className=\"messageHelperText\" />\n          ) : (\n            currentChatRooms.map(singleChatRoom)\n          )}\n        </Scrollbars>\n      </UserListsWrapper>\n\n      {users.length > 0 && (\n        <div className=\"ComposeMessageButton\">\n          <Button onClick={() => dispatch(toggleCompose())} type=\"primary\">\n            Compose\n          </Button>\n        </div>\n      )}\n    </ChatSidebar>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}