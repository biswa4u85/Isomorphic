{"ast":null,"code":"var _jsxFileName = \"/Users/biswa/Sites/Others/demo/Isomorphic/packages/isomorphic-cra/src/containers/Topbar/TopbarAddToCart.js\";\nimport React from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport IntlMessages from '@iso/components/utility/intlMessages';\nimport Scrollbar from '@iso/components/utility/customScrollBar';\nimport Popover from '@iso/components/uielements/popover';\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\nconst initData = ecommerceAction.initData,\n      changeViewTopbarCart = ecommerceAction.changeViewTopbarCart,\n      changeProductQuantity = ecommerceAction.changeProductQuantity;\nlet totalPrice;\nexport default function TopbarAddtoCart() {\n  let _useRouteMatch = useRouteMatch(),\n      url = _useRouteMatch.url;\n\n  const dispatch = useDispatch();\n  const customizedTheme = useSelector(state => state.ThemeSwitcher.topbarTheme);\n\n  const _useSelector = useSelector(state => state.Ecommerce),\n        productQuantity = _useSelector.productQuantity,\n        products = _useSelector.products,\n        loadingInitData = _useSelector.loadingInitData,\n        viewTopbarCart = _useSelector.viewTopbarCart;\n\n  function hide() {\n    dispatch(changeViewTopbarCart(false));\n  }\n\n  function handleVisibleChange() {\n    dispatch(changeViewTopbarCart(!viewTopbarCart));\n  }\n\n  React.useEffect(() => {\n    if (!loadingInitData) {\n      dispatch(initData());\n    }\n  }, [dispatch, loadingInitData]);\n\n  function renderProducts() {\n    totalPrice = 0;\n\n    if (!productQuantity || productQuantity.length === 0) {\n      return React.createElement(\"div\", {\n        className: \"isoNoItemMsg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, \"No item found\"));\n    }\n\n    return productQuantity.map(product => {\n      totalPrice += product.quantity * products[product.objectID].price;\n      return React.createElement(SingleCart, Object.assign({\n        key: product.objectID,\n        quantity: product.quantity,\n        changeQuantity: changeQuantity,\n        cancelQuantity: cancelQuantity\n      }, products[product.objectID], {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }));\n    });\n  }\n\n  function changeQuantity(objectID, quantity) {\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      } else {\n        newProductQuantity.push({\n          objectID,\n          quantity\n        });\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n\n  function cancelQuantity(objectID) {\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n\n  const content = React.createElement(TopbarDropdownWrapper, {\n    className: \"topbarAddtoCart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"isoDropdownHeader\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(IntlMessages, {\n    id: \"sidebar.cart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"isoDropdownBody isoCartItemsWrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(Scrollbar, {\n    style: {\n      height: 300\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, renderProducts())), React.createElement(\"div\", {\n    className: \"isoDropdownFooterLinks\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"\".concat(url, \"/cart\"),\n    onClick: hide,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(IntlMessages, {\n    id: \"topbar.viewCart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  })), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(IntlMessages, {\n    id: \"topbar.totalPrice\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), \":\", ' ', React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"$\", totalPrice.toFixed(2)))));\n  return React.createElement(Popover, {\n    content: content,\n    trigger: \"click\",\n    visible: viewTopbarCart,\n    onVisibleChange: handleVisibleChange,\n    placement: \"bottomLeft\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"isoIconWrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"ion-android-cart\",\n    style: {\n      color: customizedTheme.textColor\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }), productQuantity.length === 0 ? '' : React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, productQuantity.length)));\n}","map":{"version":3,"sources":["/Users/biswa/Sites/Others/demo/Isomorphic/packages/isomorphic-cra/src/containers/Topbar/TopbarAddToCart.js"],"names":["React","Link","useRouteMatch","useDispatch","useSelector","IntlMessages","Scrollbar","Popover","SingleCart","ecommerceAction","TopbarDropdownWrapper","initData","changeViewTopbarCart","changeProductQuantity","totalPrice","TopbarAddtoCart","url","dispatch","customizedTheme","state","ThemeSwitcher","topbarTheme","Ecommerce","productQuantity","products","loadingInitData","viewTopbarCart","hide","handleVisibleChange","useEffect","renderProducts","length","map","product","quantity","objectID","price","changeQuantity","cancelQuantity","newProductQuantity","forEach","push","content","height","toFixed","color","textColor"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport IntlMessages from '@iso/components/utility/intlMessages';\nimport Scrollbar from '@iso/components/utility/customScrollBar';\nimport Popover from '@iso/components/uielements/popover';\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\n\nconst {\n  initData,\n  changeViewTopbarCart,\n  changeProductQuantity,\n} = ecommerceAction;\nlet totalPrice;\nexport default function TopbarAddtoCart() {\n  let { url } = useRouteMatch();\n  const dispatch = useDispatch();\n  const customizedTheme = useSelector(state => state.ThemeSwitcher.topbarTheme);\n  const {\n    productQuantity,\n    products,\n    loadingInitData,\n    viewTopbarCart,\n  } = useSelector(state => state.Ecommerce);\n\n  function hide() {\n    dispatch(changeViewTopbarCart(false));\n  }\n  function handleVisibleChange() {\n    dispatch(changeViewTopbarCart(!viewTopbarCart));\n  }\n  React.useEffect(() => {\n    if (!loadingInitData) {\n      dispatch(initData());\n    }\n  }, [dispatch, loadingInitData]);\n\n  function renderProducts() {\n    totalPrice = 0;\n    if (!productQuantity || productQuantity.length === 0) {\n      return (\n        <div className=\"isoNoItemMsg\">\n          <span>No item found</span>\n        </div>\n      );\n    }\n    return productQuantity.map(product => {\n      totalPrice += product.quantity * products[product.objectID].price;\n      return (\n        <SingleCart\n          key={product.objectID}\n          quantity={product.quantity}\n          changeQuantity={changeQuantity}\n          cancelQuantity={cancelQuantity}\n          {...products[product.objectID]}\n        />\n      );\n    });\n  }\n  function changeQuantity(objectID, quantity) {\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      } else {\n        newProductQuantity.push({\n          objectID,\n          quantity,\n        });\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n  function cancelQuantity(objectID) {\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n\n  const content = (\n    <TopbarDropdownWrapper className=\"topbarAddtoCart\">\n      <div className=\"isoDropdownHeader\">\n        <h3>\n          <IntlMessages id=\"sidebar.cart\" />\n        </h3>\n      </div>\n      <div className=\"isoDropdownBody isoCartItemsWrapper\">\n        <Scrollbar style={{ height: 300 }}>{renderProducts()}</Scrollbar>\n      </div>\n      <div className=\"isoDropdownFooterLinks\">\n        <Link to={`${url}/cart`} onClick={hide}>\n          <IntlMessages id=\"topbar.viewCart\" />\n        </Link>\n\n        <h3>\n          <IntlMessages id=\"topbar.totalPrice\" />:{' '}\n          <span>${totalPrice.toFixed(2)}</span>\n        </h3>\n      </div>\n    </TopbarDropdownWrapper>\n  );\n  return (\n    <Popover\n      content={content}\n      trigger=\"click\"\n      visible={viewTopbarCart}\n      onVisibleChange={handleVisibleChange}\n      placement=\"bottomLeft\"\n    >\n      <div className=\"isoIconWrapper\">\n        <i\n          className=\"ion-android-cart\"\n          style={{ color: customizedTheme.textColor }}\n        />\n        {productQuantity.length === 0 ? (\n          ''\n        ) : (\n          <span>{productQuantity.length}</span>\n        )}\n      </div>\n    </Popover>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}