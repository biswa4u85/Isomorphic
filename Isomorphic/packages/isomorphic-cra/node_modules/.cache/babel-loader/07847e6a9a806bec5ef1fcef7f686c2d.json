{"ast":null,"code":"var _jsxFileName = \"/Users/biswa/Sites/Others/demo/Isomorphic/shared/containers/Map/Leaflet/LeafletMap.js\";\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport Wrapper from './LeafletMap.styles';\nconst style = {\n  width: '100%',\n  height: '400px'\n};\nconst config = {\n  tileLayer: 'http://{s}.tile.osm.org/{z}/{x}/{y}.png',\n  maxZoom: 18,\n  attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n  defaultZoom: 11,\n  center: [40.706877, -74.011265]\n};\nexport default function LeafletMap({\n  id = 'leaflet-map',\n  center = [40.706877, -74.011265],\n  zoom = 11,\n  markerList = [],\n  htmlMarkerList = [],\n  customIconMarkerList = []\n}) {\n  // create map\n  const mapRef = useRef(null);\n  useEffect(() => {\n    mapRef.current = L.map(id, {\n      center: center,\n      zoom: zoom,\n      layers: [L.tileLayer(config.tileLayer, {\n        attribution: config.attribution,\n        maxZoom: config.maxZoom\n      })]\n    }); // return ()=>\n  }, []); // add markers\n\n  const markerRef = useRef(null);\n  useEffect(() => {\n    if (markerRef.current) {// markerRef.current.map(marker =>\n      //   marker.setLatLng({ lat: marker.position[0], lng: marker.position[1] })\n      // );\n    } else {\n      if (markerList.length !== 0) {\n        markerRef.current = markerList.map(({\n          position,\n          popupText\n        }) => L.marker(position).addTo(mapRef.current).bindPopup(popupText));\n      }\n\n      if (htmlMarkerList.length !== 0) {\n        markerRef.current = htmlMarkerList.map(({\n          className,\n          html,\n          position,\n          popupText\n        }) => L.marker(position, {\n          icon: L.divIcon({\n            className: className,\n            popupAnchor: [15, -15],\n            // point from which the popup should open relative to the iconAnchor\n            html: html\n          })\n        }).addTo(mapRef.current).bindPopup(popupText));\n      }\n\n      if (customIconMarkerList.length !== 0) {\n        markerRef.current = customIconMarkerList.map(({\n          shadowUrl,\n          iconUrl,\n          position,\n          popupText\n        }) => L.marker(position, {\n          icon: L.icon({\n            iconUrl: iconUrl,\n            shadowUrl: shadowUrl,\n            iconSize: [40, 40],\n            // size of the icon\n            shadowSize: [40, 40],\n            // size of the shadow\n            // iconAnchor: [22, 94], // point of the icon which will correspond to marker's location\n            shadowAnchor: [12, 20],\n            // the same for the shadow\n            popupAnchor: [0, -20] // point from which the popup should open relative to the iconAnchor\n\n          })\n        }).addTo(mapRef.current).bindPopup(popupText));\n      }\n    }\n  }, [markerList, htmlMarkerList, customIconMarkerList]);\n  return React.createElement(Wrapper, {\n    className: \"isoLeafletMap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: id,\n    style: style,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/biswa/Sites/Others/demo/Isomorphic/shared/containers/Map/Leaflet/LeafletMap.js"],"names":["React","useEffect","useRef","L","Wrapper","style","width","height","config","tileLayer","maxZoom","attribution","defaultZoom","center","LeafletMap","id","zoom","markerList","htmlMarkerList","customIconMarkerList","mapRef","current","map","layers","markerRef","length","position","popupText","marker","addTo","bindPopup","className","html","icon","divIcon","popupAnchor","shadowUrl","iconUrl","iconSize","shadowSize","shadowAnchor"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport Wrapper from './LeafletMap.styles';\nconst style = {\n  width: '100%',\n  height: '400px',\n};\nconst config = {\n  tileLayer: 'http://{s}.tile.osm.org/{z}/{x}/{y}.png',\n  maxZoom: 18,\n  attribution:\n    '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n  defaultZoom: 11,\n  center: [40.706877, -74.011265],\n};\nexport default function LeafletMap({\n  id = 'leaflet-map',\n  center = [40.706877, -74.011265],\n  zoom = 11,\n  markerList = [],\n  htmlMarkerList = [],\n  customIconMarkerList = [],\n}) {\n  // create map\n  const mapRef = useRef(null);\n  useEffect(() => {\n    mapRef.current = L.map(id, {\n      center: center,\n      zoom: zoom,\n      layers: [\n        L.tileLayer(config.tileLayer, {\n          attribution: config.attribution,\n          maxZoom: config.maxZoom,\n        }),\n      ],\n    });\n    // return ()=>\n  }, []);\n\n  // add markers\n  const markerRef = useRef(null);\n  useEffect(() => {\n    if (markerRef.current) {\n      // markerRef.current.map(marker =>\n      //   marker.setLatLng({ lat: marker.position[0], lng: marker.position[1] })\n      // );\n    } else {\n      if (markerList.length !== 0) {\n        markerRef.current = markerList.map(({ position, popupText }) =>\n          L.marker(position)\n            .addTo(mapRef.current)\n            .bindPopup(popupText)\n        );\n      }\n      if (htmlMarkerList.length !== 0) {\n        markerRef.current = htmlMarkerList.map(\n          ({ className, html, position, popupText }) =>\n            L.marker(position, {\n              icon: L.divIcon({\n                className: className,\n                popupAnchor: [15, -15], // point from which the popup should open relative to the iconAnchor\n                html: html,\n              }),\n            })\n              .addTo(mapRef.current)\n              .bindPopup(popupText)\n        );\n      }\n      if (customIconMarkerList.length !== 0) {\n        markerRef.current = customIconMarkerList.map(\n          ({ shadowUrl, iconUrl, position, popupText }) =>\n            L.marker(position, {\n              icon: L.icon({\n                iconUrl: iconUrl,\n                shadowUrl: shadowUrl,\n                iconSize: [40, 40], // size of the icon\n                shadowSize: [40, 40], // size of the shadow\n                // iconAnchor: [22, 94], // point of the icon which will correspond to marker's location\n                shadowAnchor: [12, 20], // the same for the shadow\n                popupAnchor: [0, -20], // point from which the popup should open relative to the iconAnchor\n              }),\n            })\n              .addTo(mapRef.current)\n              .bindPopup(popupText)\n        );\n      }\n    }\n  }, [markerList, htmlMarkerList, customIconMarkerList]);\n  return (\n    <Wrapper className=\"isoLeafletMap\">\n      <div id={id} style={style} />\n    </Wrapper>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}